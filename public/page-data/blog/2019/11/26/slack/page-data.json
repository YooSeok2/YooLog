{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2019/11/26/slack","result":{"data":{"site":{"siteMetadata":{"title":"Kim Yoo seok' Blog","author":"Kim Yoo Seok","siteUrl":"https://yoolog.netlify.com"}},"markdownRemark":{"id":"8ac83d65-6ba6-5c35-8d42-51eaddf9e875","excerpt":"…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/788a08fb3e2091c377949cd207112922/635b1/slack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 420px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABh0lEQVQ4y72TT0sCURTF54P4aVyMSwlaCG4iVAgRxPaGzAeICvIP7dokuMggiKRFYOQiwRQhRgMdXbTIcGJS58+b03sXZqJ0E1gHDtx5vPm98+7ckVzXxTot/SmQcTsuW9rkOM7Klxlj5JVAAfPkwznItm1/3bIsWhMQUXsSe74BQTCGrm7h4XXAnxm3vx/NZhOGYeCner0eRqMR1V5SAvISNzNg9/kDm/enuHhRiffYaqHRaCAWi6Fer6NaraLdbqPf76NWqyGXy6FQKEBVVb8tEkU2bexXWijeDnDVPUPxTsEMc2xvbRMslUohHA4jk8kgGAwiGo0in88jm80iEAigXC5TSgGVRBLX5L05Psf7xh7m1ztgXUUcg4PDI4RCMuLxOJLJJBKJBCKRCNLpNBRFoYSyLKNUKvnXllzm0vUc7reTSxhPFaqFtOEQ4/EYuq5jsVig0+lgMplQP0U9nU5hmiY0TaN0Ql9jw+n+V2aiHwy/1fJgi8YyZ2nOPHsjs8r/86esw59Iv8mfFZbq9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"slack\"\n        title=\"\"\n        src=\"/static/788a08fb3e2091c377949cd207112922/635b1/slack.png\"\n        srcset=\"/static/788a08fb3e2091c377949cd207112922/cf440/slack.png 148w,\n/static/788a08fb3e2091c377949cd207112922/d2d38/slack.png 295w,\n/static/788a08fb3e2091c377949cd207112922/635b1/slack.png 420w\"\n        sizes=\"(max-width: 420px) 100vw, 420px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br>\n<br>\n<h1>개요</h1>\n<br>\n<p><strong>슬랙 봇</strong>에 대해 알게되고 더 자세히 알아보려고 인터넷 서치를 하던 중 한 블로그에서 재밌는 글을 보았다. 내용을 간략히 정리하자면\n사내에서 슬랙 봇을 이용하여 <strong>여러 문제들을 해결</strong>하고 있다는 것이었다. 그 사례로는 서비스 내 용어가 팀별로 다르게 쓰이거나 여러가지로\n불리고 있어 신규 입사자나 전달이 안된 다른 팀과 소통할 때 오해가 생기게 되는데 이때 <strong>슬랙 봇이 용어를 설명 및 교정</strong> 해준다거나\n사내에 업무 일정이나 행사 등을 공지 하고 슬랙 봇에 업데이트 해서 당일 아침이나 전날 밤에 리마인드 해주는 기능으로 쓰이는 등이 있었다.\n이 글을 보면서 나는 현재 회사 <strong>출/퇴근 관리</strong>가 슬랙 해당 채널에서 출/퇴근을 메세지로 치면 나중에 한 분이 그 메세지를 종합하여 직접 계산해서 문서화하는 방식으로 진행하고 있는데, 이 번거러움을 <strong>슬랙 봇을 이용하면 해결</strong>할 수 있겠다는 생각이 들어 기획하게 되었다.</p>\n<p><strong>참고자료 링크 : <a href=\"https://spoqa.github.io/2017/05/22/slackbot.html\">https://spoqa.github.io/2017/05/22/slackbot.html</a></strong></p>\n<br>\n<br>\n<h1>기획</h1>\n<br>\n<ul>\n<li><strong>슬랙 해당 채널</strong>에 <em>출근,퇴근,ㅌㄱ,ㅊㄱ</em> 등에 키워드를 슬랙 봇이 듣도록 설정한다. 텍스트를 입력했을 때 문장에 해당하는 키워드가 있을 경우\n그 문장을 작성한 유저에 필요한 정보를 가져온다.</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67bf3db037e573be90900ad36e1dbcd6/809be/text.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.67039106145251%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABcElEQVQoz32Ry07CQBiFCbgSxMvCnRvjM0gVpAUTXagx+H4muvGyIYENwlNINE2hkEIktrQgbSGES8uxM9imIPpPTqabfvnOP4HjHRZX+9e42LtEaisNbjOFWJDBy2MRPVNHs9GEJEnodrvQdR3D4RCj0Qi2bYPMbDaDfwJslEXm4MZJBme752CjHJi1I+Tv8xDECniehyiKaLfbNKqqotPpYDKZrAbGwwmkt0+p3Uk4CS6aAhOaAxVVRuujtWDkHwJbTiC+ngAb4ZCMsGA3uIXK6peGeq1ODYkZiWmaGAwGsCwLq2YOdEBuqKFTOXubxRv/jvJrGbVazatLomka3eV0OqXV/fGAnqEDjIUY5O5y0BzDhtTwHsO1ItXIz2QV4/GY3m5+A38qFx4KaCmfqFaqEAQBiqJAluX5a/d0avdvZT/wMBhD6bkEyznEzjAM9Pt9uj/yTW5iRoyX8yew+FSC7RxDNyiEPASxckOAq/IN6GsxvDJ+ZY8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"text\"\n        title=\"\"\n        src=\"/static/67bf3db037e573be90900ad36e1dbcd6/b9e4f/text.png\"\n        srcset=\"/static/67bf3db037e573be90900ad36e1dbcd6/cf440/text.png 148w,\n/static/67bf3db037e573be90900ad36e1dbcd6/d2d38/text.png 295w,\n/static/67bf3db037e573be90900ad36e1dbcd6/b9e4f/text.png 590w,\n/static/67bf3db037e573be90900ad36e1dbcd6/809be/text.png 716w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li><strong>데이터베이스</strong>에 얻어온 정보를 분류하여 저장한다.</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/b6ea3/database.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 49.21465968586388%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3UlEQVQoz6WSyW7DMAxE8/8fmcIx6sbxllibRUqaUHaztCgKRDkMxAM14uNoR0xgv4DJg2NEFAFpVUrxft7q3/rZk7DLJsFqzF2HZjQwzq+mz41/Gf1jGMBWjA4Vhv6Mj1ahPok6hVG51yck5g3ZWQTB9ywPhADnGQtxGTIbjcupRTNZaEF+XEYhskxn6hq9INedRjNoHGWfF72UIG8pk1GIUmfULO0IZqES5CApG6hxwNfZwa4mbyCHtO1w3u9xbCdUknBG/uw1ppKUvXzonG7IKRPBfqebkTP6q4ZXt/gUAHsfHMYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"database\"\n        title=\"\"\n        src=\"/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/b9e4f/database.png\"\n        srcset=\"/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/cf440/database.png 148w,\n/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/d2d38/database.png 295w,\n/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/b9e4f/database.png 590w,\n/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/f9b6a/database.png 885w,\n/static/0dbec14fc0bb52d79eb8e71cc1ee12b2/b6ea3/database.png 955w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li><strong>화면에 유저들을 배치하고</strong> <em>저장된 데이터</em>를 이용하여 username으로 각각의 데이터를 분류하여 통계를 내고 뿌려준다.</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b06fc6566adc85e89e96026ca0d21d9b/1ad92/main.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.22916666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABhklEQVQ4y5WSXU/CYAyF+fde+IUoQacGkIHGRDH+AhMvTLgxgUBISLgDpiADx8Y+gONOw0tGZApLuvbt2mc93RKLxQJ/Xb43hfU9CqP4uvl8vooTvA3NEZLpPNJaCalzHUdnOaQyhTAu4ODkWp4xdxx6WubqFqcXOvYONby8VtagAvwamtDvnrGf1JC5LCJXLCNfKiOnP4rdlJ6QDT0tL/GD5LTsPd4q77+Bs1kgh88PA4HvYtcrujYBep4XQmeo1mrodDpwXRe242AymcC2HThhbNu2xG5YOxqP5fl0OhWLQteAzWYThmEI0FkCnWUjPY214xDImHUbgb7vS6LdbmMwGMiZjSxmE2N6Gl/MaZlTdbFATtjv9xEEwQpIr4BKyb9AJvmVqtWq7FDB2Kj2pCQTspVkApVkNZFqisrn9NxtdBWxklutlkiO2+FOkpmo1+vo9XoyRXRCJU1NaFmWxARunFC9udFooNvtrqbb9NtstUPCaKZpihxOwUZl0TPrlFzmaVHgDz0uJ7ZJsPPXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"main\"\n        title=\"\"\n        src=\"/static/b06fc6566adc85e89e96026ca0d21d9b/b9e4f/main.png\"\n        srcset=\"/static/b06fc6566adc85e89e96026ca0d21d9b/cf440/main.png 148w,\n/static/b06fc6566adc85e89e96026ca0d21d9b/d2d38/main.png 295w,\n/static/b06fc6566adc85e89e96026ca0d21d9b/b9e4f/main.png 590w,\n/static/b06fc6566adc85e89e96026ca0d21d9b/f9b6a/main.png 885w,\n/static/b06fc6566adc85e89e96026ca0d21d9b/2d849/main.png 1180w,\n/static/b06fc6566adc85e89e96026ca0d21d9b/1ad92/main.png 1344w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li><strong>자세히 보기</strong>버튼을 만들어 클릭 시 <em>출근시간, 퇴근시간, 휴가/반차정보, 지각세부정보</em>에 자세한 정보를 볼 수 있도록 한다.</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5268224cb83aaef51a861b6ee7902f2e/4d600/lookattendance.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.62565172054223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABiklEQVQoz52RTW8BURSG/TBtqmnMJzNXM1/VCvph07XEP2FhNkUIYuFH+AsSS5vWMCWhg8Fb9yZDLdomTvLeOe+9c557Tm5I13XougZyq0NWTUhxDXFVR0w1QLQkYsREVEyAEwlkRYOSsBDfy7rPIvOYgxCjtQZjaJqOEF2MvRGVO1yKWVzLWUSkNK7ENDiSw43yjDCXwgX3gKj6hCh5QWT/T9x8RSpXQJjPQFCSjMGApmlCFEWUyza+vCWc8YRp5EwwnriYuJ9777I9150yP3LGeP9wmGjNW6UCWZZBWSHLsiAIAur1Os6NTqfDmjoB1mo1drhYLOD7G2w2G+x2OyaaUwUR+GCv1WpBkqQjkOd5NBoNzOdz9Ho99l2v1xgMBuj3+5jNZthut+wyz/MYiHoqGu12+xT4c+ThcIjlcsmKKGg6nWK1Wh0AtOMg/xNYrVYP4/i+zzoMIvABhOaBfh252Wye/Sjdbvf4KIZhQFVV5PN52LaNUqmEYrHIRPP/PK0pFAoghICyvgHJYGJyE2Mz8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"lookattendance\"\n        title=\"\"\n        src=\"/static/5268224cb83aaef51a861b6ee7902f2e/b9e4f/lookattendance.png\"\n        srcset=\"/static/5268224cb83aaef51a861b6ee7902f2e/cf440/lookattendance.png 148w,\n/static/5268224cb83aaef51a861b6ee7902f2e/d2d38/lookattendance.png 295w,\n/static/5268224cb83aaef51a861b6ee7902f2e/b9e4f/lookattendance.png 590w,\n/static/5268224cb83aaef51a861b6ee7902f2e/f9b6a/lookattendance.png 885w,\n/static/5268224cb83aaef51a861b6ee7902f2e/2d849/lookattendance.png 1180w,\n/static/5268224cb83aaef51a861b6ee7902f2e/4d600/lookattendance.png 1918w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li><strong>날짜 조회</strong>기능을 도입하여 원하는 날짜만 검색해서 볼 수 있도록 한다.</li>\n</ul>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50f34db8cb530018062141181834f0d8/de411/calendar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.69773299748111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQoz61RTWsTURSdv6KCC1GiqFDFahcuJMFJk8kkkzbFIiJYQdCdGN0YwY2COyGZ2klbKEhmRAlWcJEEsonxDyS7aCQECTbp5GNekuO7L0zV1oqCFw733XMP5937nqSqKiLaHLS5BQRDUXjlEHwc8qyK+dgVwSuqxmsFaljj2nlEOUc9yjeWlhBbWERYi/FeFFIkEsbUTAAHPT6c913DnfvPcOvuE1y/ncCpmQiOnVVw+ORlHPJcwpHTPnjOzOL4uRBOTKs4OhXA1ZtxXPAu4oDHi+mLAUjBYBCPHj/FyvorvHtfQKf9Df3uNj59rkNPZ2CsW3ixZmKZn5dXTaxuvOZaCynjpcBzfQMra8S/wb0HDyHJsoyP5Q9wo7Nto2P3wBjDv8bm5ltIfr8fuVxOEGSyxQ2/fN2CM+jDcZjgGBui3+c1+1EPBg7HAGw4FJkikzEnhoVCQRC9Xg/j8Rij0WjP7bsnJs2Qm1G42bKsycrFYlFMQLler4tmu91GpVJBtVpFs9kUBjRJt9sVWjL5oyGJy+UyGo2GaNq2jVqtJtBqtYSh4ziT1Xne1/Dnld3G7z7kr1cmw3w+Lwj3ZvHYOx/AfuHcyUjr6ilTmKY5WblUKuF/RDabhaQoChKJBNLpNFKplEAymdw578dRTdB1XcAwDMTjcXwH1lMZrPSrsD8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"calendar\"\n        title=\"\"\n        src=\"/static/50f34db8cb530018062141181834f0d8/b9e4f/calendar.png\"\n        srcset=\"/static/50f34db8cb530018062141181834f0d8/cf440/calendar.png 148w,\n/static/50f34db8cb530018062141181834f0d8/d2d38/calendar.png 295w,\n/static/50f34db8cb530018062141181834f0d8/b9e4f/calendar.png 590w,\n/static/50f34db8cb530018062141181834f0d8/f9b6a/calendar.png 885w,\n/static/50f34db8cb530018062141181834f0d8/2d849/calendar.png 1180w,\n/static/50f34db8cb530018062141181834f0d8/de411/calendar.png 1588w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br>\n<br>\n<h1>기술 설계</h1>\n<br>\n<ul>\n<li><strong>create-react-app 폴더명</strong>을 통해 작업환경이 준비가 되어있는 상태로 시작한다.이는 facebook에서 관리하는 React Boilerplate code이다. 따로 Boilerplate를 만들어 사용할 경우 버전 관리 및 업데이트에서 시간을 많이 소모해야되고 번거롭다. 당장에 <strong>webpack, babel</strong>은 리엑트를 할 때에 필요한 요소이기에 포함해야 되는데 이들을 세팅하는 일이 엄청 복잡하다. 하지만 <strong>create-react-app</strong> 명령어 하나면 모든게 해결된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    create-react-app slackbot</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br>\n<ol>\n<li><strong>슬랙 봇 연결</strong> 채널에 추가한 슬랙 봇에 토큰을 받아와 연결.</li>\n</ol>\n<p>Slack에 있는 API를 활용하기 위해서 먼저 설치를 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    npm install --save @slack/client </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token comment\">//slack api</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>RTMClient<span class=\"token punctuation\">,</span> WebClient<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@slack/client'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// slack tokens</span>\n<span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SLACK_TOKEN</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// slack api connect slack token</span>\n<span class=\"token keyword\">const</span> rtm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RTMClient</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> web <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebClient</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//생성한 rtm객체 실행</span>\nrtm<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//텍스트를 읽도록 event 등록 자세한 사항은 아래에 사이트 참조.</span>\nrtm<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token function\">event</span><span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">:</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n<span class=\"token comment\">//해당 유저에게 메세지를 보내는 event 등록 및 자세한 사항은 아래에 사이트 참조.</span>\nweb<span class=\"token punctuation\">.</span>chat<span class=\"token punctuation\">.</span>postMessage </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p><strong>주석을 모두 읽어주세요</strong></p>\n<p><strong>RTMClient와 WebClient</strong>를 선언하고 token과 연결을 해줘야 되는데 여기서 <strong>token은</strong> 사전에 슬랙에서 생성한 슬랙 봇에 고유 번호이다. 이는 노출되서는 안되기에 .env에서 관리한다. 먼저 <strong>rtm, web</strong>으로 선언한 슬랙 API와 Token을 연결해서 생성한다. 그리고 생성된 객체를 실행해준다.</p>\n<br>\n<p><em>참고링크 :</em> <strong><a href=\"https://api.slack.com/rtm\">https://api.slack.com/rtm</a>, <a href=\"https://api.slack.com/web\">https://api.slack.com/web</a></strong></p>\n<br>\n<ol start=\"2\">\n<li><strong>Sequelize</strong>를 사용한 데이터베이스 관리.    </li>\n</ol>\n<p><strong>sequelize</strong> 설치</p>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    npm install --save sequelize</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br>\n<p><strong>데이터베이스 관리는</strong> 모두 models폴더에서 따로 하였다. 필요한 테이블 파일을 생성하고 index파일에서 테이블을 합쳐 하나의\nDB로 만들어주는 구조로 설계하였다.</p>\n<ul>\n<li>models/goworks.js</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token comment\">//define() => sequelize에서 테이블 생성해주는 기본 함수</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">sequelize<span class=\"token punctuation\">,</span> DataType</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> Gowork <span class=\"token operator\">=</span> sequelize<span class=\"token punctuation\">.</span><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"goworks\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>\n        name <span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n            type <span class=\"token punctuation\">:</span> DataType<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">//데이터 타입 설정 </span>\n            allowNull <span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">,</span>      <span class=\"token comment\">//null값 허용 설정 Type : boolean</span>\n            \n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        gowork<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n            type <span class=\"token punctuation\">:</span> DataType<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span> \n            allowNull <span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span> \n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        time <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            type <span class=\"token punctuation\">:</span> DataType<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n            allowNull <span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        searchday <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            type <span class=\"token punctuation\">:</span> DataType<span class=\"token punctuation\">.</span><span class=\"token constant\">STRING</span><span class=\"token punctuation\">,</span>\n            allowNull <span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span>\n        \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">return</span> Gowork<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>sequelize에서 제공하는 함수 중 <strong>define 함수</strong>를 통해 테이블을 생성하였다. <strong>첫 번째 인자값</strong>에 테이블 이름을 정의하고 <strong>두 번째 인자값</strong>에 테이블에서 사용할 Column을 정의해준다.</p>\n<br>\n<ul>\n<li>models/index</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//filesystem 불러옴</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//path 불러옴</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dotenv'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> basename <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>__filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//path의 기본 폴더를 불러와서 세팅</span>\n<span class=\"token keyword\">const</span> Sequelize <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sequelize\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//sequelize 불러옴</span>\n\n<span class=\"token keyword\">const</span> db <span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//기본 db저장 객체 생성</span>\n\n<span class=\"token comment\">//mysql sequealize 불러옴</span>\n<span class=\"token keyword\">const</span> sequelize <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Sequelize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"slackbot\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DB_PASSWORD</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>host <span class=\"token punctuation\">:</span> <span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span> dialect<span class=\"token punctuation\">:</span> <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//내 데이터베이스와 sequelize가 연결되었는지 확인.</span>\nsequelize<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"연결성공\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"연결실패\"</span><span class=\"token punctuation\">,</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span> <span class=\"token comment\">//readiireSync => 디렉토리 읽어옴, _dirname :현제 티렉토리에 있는 파일이름</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>file <span class=\"token operator\">!==</span> basename<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\".js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span> <span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> model <span class=\"token operator\">=</span> sequelize<span class=\"token punctuation\">[</span><span class=\"token string\">\"import\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    db<span class=\"token punctuation\">[</span>model<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> model<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\ndb<span class=\"token punctuation\">.</span>sequelize <span class=\"token operator\">=</span> sequelize<span class=\"token punctuation\">;</span>\ndb<span class=\"token punctuation\">.</span>Sequelize <span class=\"token operator\">=</span> Sequelize<span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> db<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p><strong>주석을 모두 읽어주세요</strong></p>\n<p>현재 폴더에 있는 <strong>index</strong>파일을 제외한 테이블이 정의된 모든 파일을 읽어와서 <strong>sequelize</strong>를 이용해 <strong>하나의 DB</strong>를 만들어 내보낸다.</p>\n<br>\n<p><em>참고링크 :</em> <strong><a href=\"https://sequelize.org/\">https://sequelize.org/</a></strong></p>\n<ol start=\"3\">\n<li><strong>Dependancies</strong></li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">    <span class=\"token string\">\"@slack/client\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.0.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"@slack/web-api\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.2.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^0.19.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"body-parser\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.19.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"concurrently\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^8.2.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^4.17.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"moment\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.24.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"mysql\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.17.1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"mysql2\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.7.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"nodemon\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.19.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"react-awesome-modal\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.0.5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"react-datepicker\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.10.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.1.2\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"sequelize\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.21.1\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<h3>Github 주소</h3>\n<p><strong><a href=\"https://github.com/YooSeok2/SlackBotHelfCommute.git\">https://github.com/YooSeok2/SlackBotHelfCommute.git</a></strong></p>\n</li>\n</ul>\n<br>\n<h1>긴 글 읽어주셔서 감사합니다.</h1>","frontmatter":{"title":"슬랙 봇을 이용한 사내 출결 관리 시스템","date":"26 noviembre 2019","image":{"id":"484c08c7-f933-5223-b8bb-41c7e8821904","childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABh0lEQVQ4y72TT0sCURTF54P4aVyMSwlaCG4iVAgRxPaGzAeICvIP7dokuMggiKRFYOQiwRQhRgMdXbTIcGJS58+b03sXZqJ0E1gHDtx5vPm98+7ckVzXxTot/SmQcTsuW9rkOM7Klxlj5JVAAfPkwznItm1/3bIsWhMQUXsSe74BQTCGrm7h4XXAnxm3vx/NZhOGYeCner0eRqMR1V5SAvISNzNg9/kDm/enuHhRiffYaqHRaCAWi6Fer6NaraLdbqPf76NWqyGXy6FQKEBVVb8tEkU2bexXWijeDnDVPUPxTsEMc2xvbRMslUohHA4jk8kgGAwiGo0in88jm80iEAigXC5TSgGVRBLX5L05Psf7xh7m1ztgXUUcg4PDI4RCMuLxOJLJJBKJBCKRCNLpNBRFoYSyLKNUKvnXllzm0vUc7reTSxhPFaqFtOEQ4/EYuq5jsVig0+lgMplQP0U9nU5hmiY0TaN0Ql9jw+n+V2aiHwy/1fJgi8YyZ2nOPHsjs8r/86esw59Iv8mfFZbq9wAAAABJRU5ErkJggg==","aspectRatio":1.5,"src":"/static/788a08fb3e2091c377949cd207112922/39a9b/slack.png","srcSet":"/static/788a08fb3e2091c377949cd207112922/0cc6a/slack.png 256w,\n/static/788a08fb3e2091c377949cd207112922/39a9b/slack.png 420w","srcWebp":"/static/788a08fb3e2091c377949cd207112922/58d49/slack.webp","srcSetWebp":"/static/788a08fb3e2091c377949cd207112922/6306c/slack.webp 256w,\n/static/788a08fb3e2091c377949cd207112922/58d49/slack.webp 420w","sizes":"(max-width: 420px) 100vw, 420px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/slack/","previous":{"fields":{"slug":"/police/"},"frontmatter":{"title":"경찰청 키오스크","path":"/blog/2019/10/25/policemain"}},"next":null}}}