{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2019/09/11/finedust","result":{"data":{"site":{"siteMetadata":{"title":"Kim Yoo seok' Blog","author":"Kim Yoo Seok","siteUrl":"https://yoolog.netlify.com"}},"markdownRemark":{"id":"593ad885-932c-590c-8f86-8d7128283978","excerpt":"개요 대한민국 전역이 중국에서 넘어오는 미세먼지로 인해 고역을 치룰 때 실외는 곳곳에 미세먼지수치를 알려주는 컨텐츠가 많아서 손쉽게 오염정도를 파악할 수 있었으나 실내 수치는 알 도리가 없었다. 이에 실내 오염수치(미세먼지, 초미세먼지, 이산화탄소, TVOC…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/97bb256459b4bd15de2d04bb08ded56a/a5ebe/finedust.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 70.03710575139146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACxElEQVQ4y21UWU8TURTun/PZv+CLf0DiG4QYCEoCLiwJLhTaQpGWlrqBDz6QgIlRE4kSalnakS4D7ez7zJ2Zz3OnFEL0JF/OufdMv/udc25vStEcSIoJzfBg2yE03YOqO9BNrw/j2muGm8CwPHS7JmTZotiHYfqJV3UXKc1w4NgOQvjomE2AoiAANE2DoiiQJIkgw3FccAvDKPG7X89Q2q5SFEPXDSLlohykTGKOwbD66TWys0N4UpyG7BhwnQCO6xH8BJ7P4Ad0rM/BoNHvRNmmgwK4lOfQSX3KdSK0TQFPV+eQGb2LW3du40vtW6KChQxxHCcqGAupJXwdJSr5OiBynut/A3BxKctiMAMJB9UKPtcF7FV3IEoNRPSt5wVUPhGwCJbJoEg+LCuArDow9ABSz4NpBFdtSAhNajC3/doP7JAy2ZPo9JiI6CDKWbbfh+PBsImAvGbbVLIDUVVh2l6i8opQN13Iiobv+0f4eXACmzZdjyGKIgQhKYwY2ABxiJDg0z6HzRzKBzdL5oQmTQjoy44oyQkDGjWfvmXZ1Ds7maSqalSqkaw5XMpzz1i/1/w6pYzLkvkGVxVFMU00xL/G8+FVef8z3pqEkJMNwE3VbXTOZYgXhK6CDnm+7lwouOipSdwWpSQvNJqoE1rnCrXOuqlwQPj7SEA6V8CrTAGZtU2Mz6QxRhifXcbCcgHp5XUsvMxjMbuBkfkVPFoqYSpTxOFp85pwQMqtdnqGbLGC/OZ7lN5t4f7oQww/nsfEiwzSK2vYLhfwtlxGhXIlQUTloIrJbB77x39ulsx7yO1XTcD04jrmcmUs5N9gZHIGQxNTGJl6hqVcHsXVHCrFDXzY+oiV3T2MzT/HveEHdJdPkEoeAuPyEaC/Dn8IurIJodW7hIRmR0ajeY7GmUhxD612F23yIvXyuN7CYbWOutChC2/jL+riCC0jQr+2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"finedust\"\n        title=\"\"\n        src=\"/static/97bb256459b4bd15de2d04bb08ded56a/b9e4f/finedust.png\"\n        srcset=\"/static/97bb256459b4bd15de2d04bb08ded56a/cf440/finedust.png 148w,\n/static/97bb256459b4bd15de2d04bb08ded56a/d2d38/finedust.png 295w,\n/static/97bb256459b4bd15de2d04bb08ded56a/b9e4f/finedust.png 590w,\n/static/97bb256459b4bd15de2d04bb08ded56a/f9b6a/finedust.png 885w,\n/static/97bb256459b4bd15de2d04bb08ded56a/a5ebe/finedust.png 1078w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br>\n<br>\n<h1>개요</h1>\n<br>\n<p>대한민국 전역이 중국에서 넘어오는 미세먼지로 인해 고역을 치룰 때 <strong>실외</strong>는 곳곳에 미세먼지수치를 알려주는 컨텐츠가 많아서 손쉽게 오염정도를 파악할 수 있었으나 <strong>실내 수치</strong>는 알 도리가 없었다. 이에 <em>실내 오염수치(미세먼지, 초미세먼지, 이산화탄소, TVOC)를 파악하고</em> 평균 수치를 넘어서 높게 측정이 되면 환기 시점을 알려주는 웹을 만들게 되었다.</p>\n<br>\n<br>\n<h1>기획</h1>\n<br>\n<ul>\n<li><strong>라즈베리파이</strong>를 이용하여 미세먼지, 초미세먼지, 이산화탄소, TVOC를 측정하고 수치를 json형태로 서버에 저장한다.</li>\n</ul>\n<br>\n<p>   미세먼지/초미세먼지 : <a href=\"http://192.168.0.31/aqi.json\">http://192.168.0.31/aqi.json</a> </br>\n이산화탄소/TVOC : <a href=\"http://192.168.0.31/voc-co2.json\">http://192.168.0.31/voc-co2.json</a></p>\n<hr>\n<p>   \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1479eb3d48f6bd22dd7ec52775868e49/2ad13/json.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.74614065180102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBUlEQVQoz42S1w0DMQxDb//drvfe51DwDNBxCoJ8CLYpiaZKNM+zTdNkwzBY0zSW57m1bWvCl2Vxd07wLMvc+zgOlwOG4b+uyyIljuPoHEVRWNd1H4TrunpC8PM8HSGxigeLCFRS3/dWVZULFL5tmzcS+RAfalQZRux9309CnBCWZekSwTD8MhTSEu6oEaEUekIMAGdd1/5HKQwJUahkicA8ocrFGfYw7J2IpVADkEII933/HMo/U07T1A9A5X6d8vvagL0TkhzHsfscQpULLuwnIUH4Q4VJkrwQSqFWKVLz1WDWhjPsHXdOcHr8rYf4X9ZGe6i1CZVpfaggXGyUEgtOLJ88AMRTEO3PCCFEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"json\"\n        title=\"\"\n        src=\"/static/1479eb3d48f6bd22dd7ec52775868e49/b9e4f/json.png\"\n        srcset=\"/static/1479eb3d48f6bd22dd7ec52775868e49/cf440/json.png 148w,\n/static/1479eb3d48f6bd22dd7ec52775868e49/d2d38/json.png 295w,\n/static/1479eb3d48f6bd22dd7ec52775868e49/b9e4f/json.png 590w,\n/static/1479eb3d48f6bd22dd7ec52775868e49/f9b6a/json.png 885w,\n/static/1479eb3d48f6bd22dd7ec52775868e49/2d849/json.png 1180w,\n/static/1479eb3d48f6bd22dd7ec52775868e49/2ad13/json.png 2332w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br>\n<ul>\n<li><strong>React.js</strong>를 이용하여 반응형으로 화면을 만들고 서버에서 수치들을 받아와 파싱하여 활용한다.</li>\n</ul>\n<br>\n<ul>\n<li><strong>메인에는 chart</strong>로 한 달 단위로 쌓인 수치를 모두 보여주며 하단에는 가장 최근 수치를 보여준다.</li>\n</ul>\n<br>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/14c50/chart.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 74.86818980667837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAC4ElEQVQ4y11SaVMTQRDdX6xfRKtEq0ApFOUoFDGEyyREuTEUFCpaiB9ERAkhAYQcJGyyOTYJkr2z2X32bA4iXfV2eqZ7Xr/tae7ySkNF0iHJBioM5Ffa/Ks2VGQd5b8q0ny5nte4JzVyGRenaCZkWUE2m0U+n3dWBkEQoCgKmNm27YAZu9zZ/xXBSLa+lyQHlmVBVgxwEn0UlVVRiUB3ICuaA02rwjBq0A2zBaYkU9KQzkkUM527iqq3YhxjrdVqBKulpAlWtUaw2lBXWldbP7MdsHMmjpPVqkPGSNuJHLB9G5FNOTfJmz4rIt8kdJLayKxq9ZqAFVTV/4u1E7YUNn+ZHapKg7CeiFQSFpHYhgFL00BNhWWa9WLNog2fNaFF6BCYVejhE1gVCchnYZO6clyATS9oxBKwymUofA5WsYSWsX7SPWclUdcKqUJFvIQQz0GM8igGj1FMChALFZR4GqXzPMSEgGw0g0I8g1KcR/kih9K5gEKKYicJ6IUiZN2kOaQeMmMjwGSz9pqkuEa/xhptklJVU2msZNrZ9RyK1arV5mM7vWam0kxzYklC6CjmIBg+QygSReg4jl+HZ9g7OMXu/gn2QqeIkIognf0mf5/WA8rb/raLre0f+B78g71IHGmhCO4iXcAb/yImvbN4PeWHZ2Yegy4vbncPoGvIjc7nLjwansSUZw4TEz64x30YdXng9szjrmsWvf419E3Po3diBgenSXB8VoT//QZmA+uYng9gYe0DBl+6cauzBz2jk3j8ahxP3R4EVpaxsTSHj+vrCCwuYXVzC4FMAZ8yOfg3P+Ph2BR+HsfApTIiXniWMOJbxoh3Ga63qxgY86HjcT/u9Q/jft8Ano1OYJlI5nxerCwsYpX89c0vmNnZwdDMO9zpfoKOB104ODwBVyzLiNNLNRFL5ZCkNiToFc/O04gmeMSSGeqPiGRKAE+jkyFlfDqPMCkKH0URoTVOOSJx/QM/skhX5F7SJQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"chart\"\n        title=\"\"\n        src=\"/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/b9e4f/chart.png\"\n        srcset=\"/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/cf440/chart.png 148w,\n/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/d2d38/chart.png 295w,\n/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/b9e4f/chart.png 590w,\n/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/f9b6a/chart.png 885w,\n/static/77e6d62bea6f0dc0d9cb31e1020bbb4e/14c50/chart.png 1138w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br>\n<ul>\n<li><strong>사이드에는</strong> 오염수치일 경우 환기가 필요하다는 이미지와 어떠한 사유인지 알려주도록 하고 최근 환기 알림에 일정 시간동안 보여준다.</li>\n</ul>\n<br>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4eb2798cad2c9e90648beab5cc17bd8f/d854d/notice.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 417px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 201.91846522781773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAYAAAD+MdrbAAAACXBIWXMAAAsSAAALEgHS3X78AAADl0lEQVRIx+1XWU8TURTmD/hm4pM/wD/gD9Bg3GI0MfFJTdT4QDQukWCM4otbXGJcWBNWLQqmxTSARkhEa1GBFrVSlgQolNJiy3SYtjOd9fPemYGW0gVQ3zzJN2d675nvnjtnudMihuURXRRAdSbo+HpAnylauqGa5ZKrDNYD+kzR0o2QlJBIEC2Iy5BlFZKsEMgmlKygdlw8aXhIL1xcQjTK4pPDgYmJCXg8HvhnZqCLhhWi6QMZg0RiCTFFSD0UJRk8z0NR6KqSrqkoEMEjBE4LgFejWOLTNJWAai07oaKoq1adl7wYnH8Dy/ta2L42YiDYAZ/ghKTyhrcmaVZCWSfUdCMqM3w/2j12HL1UhrLTR/C2rhylV07jlvUeXEwnFE0wSfN4qJnvJqbO4d24DeWNr7Dn8AF8qS/FYs9dnDm+C1v278aJymuYEfqXvSxI6CPe1XYTQkszrl6/AEfFWQw3l+LWuUPYtH07Nhfvg3WogVjKMPnyE3qYbjR32/Gkqw33qm7i6fkDsN44iVPHdmDbwb3YWrwTD9rvEEsRqmLEPkdQDMKxxY/o6LOj/+cbvGivxd3yi2h6ehsW23M8bnmMksslsDufEGsJyO+hMRuUxuD4boHX0QT3gA29nhG8G5nGcFyEb3IQjvfP4JrvLBwUI8Fo7sn4sdAF19cmfPv8Gj/CCYyT2T4O+DzoxqCvFYziLxyUdIOEwuF7pBOuUSuc0yPo4SPoY33on+tCgPem5eEaElvVUvcsfAjDg7A2DAbDZCSZKkNNK0yoqobudbpRUWdFq7UXNQ0dqK63o7ahC5V17ahqtCHCsObiWr5KSRH2fBjAw+qXaGrtxIPKFtzXYcH9ihY8qmlDOBI17XN5qK6u5fVIPJMwRvqZAVHXtL9xMcHQWUA9iqeB5cyOzZidOcFLpG1pSIqqrgWRJA+pgqSkkjlRn88JQUojJJfFGPUqjqEhN8bHx+B2uzA1NQWn04npaR+ydtpCWxZFGcG5OQQCAczOzoJhGIyOjiIUCqWlSaoy8nZsCmoniiL8fj+CwSAmJyd1YrqA1+vVu/nyw3EegeAvhH4tkPeZ0BfJiDKvh18QBEQiEbAsq+twOAyO4/TfFJIk6YTJJA1CjAQtTg43MRthKg8LyZq2vLKWtbzIZvNXCNdcy7m2lGv7/wn/E/4rwvUi75ny1wgV5c/OlNjqM8U4G2IbwIozZSNf+5lYSPsX8BsOUuBaczhXGgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"notice\"\n        title=\"\"\n        src=\"/static/4eb2798cad2c9e90648beab5cc17bd8f/d854d/notice.png\"\n        srcset=\"/static/4eb2798cad2c9e90648beab5cc17bd8f/cf440/notice.png 148w,\n/static/4eb2798cad2c9e90648beab5cc17bd8f/d2d38/notice.png 295w,\n/static/4eb2798cad2c9e90648beab5cc17bd8f/d854d/notice.png 417w\"\n        sizes=\"(max-width: 417px) 100vw, 417px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<br>   \n<br>   \n<h1>기술 설계</h1>\n<br>\n<ul>\n<li><strong>create-react-app 폴더명</strong>을 통해 작업환경이 준비가 되어있는 상태로 시작한다.이는 facebook에서 관리하는 React Boilerplate code이다. 따로 Boilerplate를 만들어 사용할 경우 버전 관리 및 업데이트에서 시간을 많이 소모해야되고 번거롭다. 당장에 <strong>webpack, babel</strong>은 리엑트를 할 때에 필요한 요소이기에 포함해야 되는데 이들을 세팅하는 일이 엄청 복잡하다. 하지만 <strong>create-react-app</strong> 명령어 하나면 모든게 해결된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    create-react-app finedustcheck</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<hr>\n<ul>\n<li><strong>데이터 파싱</strong>을 위해 서버에서 json형태로 저장된 데이터를 <strong>fetch</strong>로 받아서 작업을 하였다. 클라이언트에서 서버에 있는 데이터를 받아오는데 사용하는 API에는 대표적으로 <strong>fetch와 axios</strong>가 있다.\n둘 다 Promise형태로 작성한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    npm install --save fetch</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://192.168.0.31/aqi.json'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'},'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>dustcontent <span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://192.168.0.31/voc-co2.json'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>co2content <span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<p>리엑트에는 <strong>Lifecycle(생명주기)</strong>를 가진다. 생명주기란 컴포넌트가 생성되고 사용되고 소멸되는 일련의 과정을 말한다.<br> 아래에 그림을 참고하여 설명을 이어서 하겠다.</p>\n<p><strong>React Lifecycle 16.4</strong></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7d6b0f05fd2bda82db23457ff5c5f2e/599e6/lifecycle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.48498088476242%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABgElEQVQoz2WRi27jIBBF/f9/lnTbajdK4mxt4zQP25inYQAbP3acSNFKvbq6Gg4MAk0yTdM8z8tD0396Qsyf8MUTAGCszfOsKIqu63D5TMZYmp4IIdZa8xDCqq5IUeR5TmnrnEtwT3emZZwLaSxYACS4gaeFEFJK9xDC570IuRBYOICECsjr/iOt/uSM0F4bsJ1WUoI1a4KVUkjB7Sp43YIFZiKUqTmUN35tdMOBKX+p2OXecu1vjWASqlbfqerM+iZseH1hbW6lI+1cNLFsJ/SZL/tSp1f45ktWD4ROpJ0IHaUG97M5ABtN5uXfocvQTpyC+kIj8fIUTY4eTeFBD0McY+wfijEOw5DEoJe+inCdQzX5uxUF2usydN+DvSx9jXwO9z5YnBQOaZxGHNJajGMirdqV+7fjx2b/K719hThSwwk/78hhe3zfHN4Pl9NZXsEDVc1n9vl23G73mx35La1IfHDK4o+UMmv2Q7DOaqukES/YOY1PdR7wpLLqad/7f7yAMrxnnHWzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"lifecycle\"\n        title=\"\"\n        src=\"/static/b7d6b0f05fd2bda82db23457ff5c5f2e/b9e4f/lifecycle.png\"\n        srcset=\"/static/b7d6b0f05fd2bda82db23457ff5c5f2e/cf440/lifecycle.png 148w,\n/static/b7d6b0f05fd2bda82db23457ff5c5f2e/d2d38/lifecycle.png 295w,\n/static/b7d6b0f05fd2bda82db23457ff5c5f2e/b9e4f/lifecycle.png 590w,\n/static/b7d6b0f05fd2bda82db23457ff5c5f2e/f9b6a/lifecycle.png 885w,\n/static/b7d6b0f05fd2bda82db23457ff5c5f2e/2d849/lifecycle.png 1180w,\n/static/b7d6b0f05fd2bda82db23457ff5c5f2e/599e6/lifecycle.png 1831w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>그림과 같이 순서는 constructor -> render -> componentDidMount 순으로 <strong>초기 마운트</strong>가 되고 state나 props값이 업데이트될 때마다 render -> componentDidUpdate가 실행된다.마지막으로 컴포넌트가 제거될 때에는 componentWillUnMount함수가 실행된다.<br></p>\n<p><strong>라이프사이클함수</strong>를 이용하여 실시간 chart 업데이트와 이벤트 등록 및 제거를 하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">    <span class=\"token keyword\">let</span> customInterval<span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">//초기 fetch 업데이트</span>\n        <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://192.168.0.31/aqi.json'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'},'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>dustcontent <span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://192.168.0.31/voc-co2.json'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>co2content <span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//실시간 fetch 업데이트</span>\n    customInterval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n            <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://192.168.0.31/aqi.json'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'},'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>dustcontent <span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n            <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://192.168.0.31/voc-co2.json'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span>res<span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>length<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token operator\">=></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>co2content <span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token number\">300000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>                                                          \n        <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>customInterval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<p><strong>처음 render</strong>가 되기 전에 Chart에 표시할 데이터를 서버에서 받아오는 작업을 <strong>constructor</strong>에서 한다. 한번 render가 되고 componentDidMount()에서 <strong>setInterval(func, 시간)</strong> <em>(는 func을 시간에 한번씩 반복실행하는 함수이다)</em> 비동기함수를 이용하여 5분에 한번씩 서버에서 데이터를 받아와 <strong>Chart</strong>를 업데이트해준다. 마지막으로 중복 실행을 막기 위해 componentWillUnMount()에서 setInterval를 제거해준다.</p>\n<ul>\n<li><strong>Rechart API</strong>를 이용해서 차트를 구현하였다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    npm install --save recharts</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n    LineChart<span class=\"token punctuation\">,</span> Line<span class=\"token punctuation\">,</span> XAxis<span class=\"token punctuation\">,</span> YAxis<span class=\"token punctuation\">,</span> CartesianGrid<span class=\"token punctuation\">,</span> Tooltip<span class=\"token punctuation\">,</span> Legend<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'recharts'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//recycle</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>visible<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        cutomInterval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>visible<span class=\"token punctuation\">:</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>visible<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token number\">15000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      \n      window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateWindowSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateChartDimentsion<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateWindowSize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateChartDimentsion<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//차트크기변경함수</span>\n    <span class=\"token function-variable function\">updateChartDimentsion</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token number\">1700</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>chartWidth <span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>width<span class=\"token operator\">-</span><span class=\"token number\">450</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token number\">1100</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>width<span class=\"token operator\">&lt;</span><span class=\"token number\">1700</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>chartWidth <span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>width<span class=\"token operator\">-</span><span class=\"token number\">550</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>width<span class=\"token operator\">&lt;</span><span class=\"token number\">1100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>chartWidth <span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>width<span class=\"token operator\">-</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token number\">850</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>chartHeight<span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token number\">650</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token operator\">&lt;</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>chartHeight<span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token operator\">-</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token operator\">&lt;</span><span class=\"token number\">650</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>chartHeight<span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token operator\">-</span><span class=\"token number\">350</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//웹 사이즈 크기 변경시 변경값으로 state값 업데이트함수</span>\n    <span class=\"token function-variable function\">updateWindowSize</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>width <span class=\"token punctuation\">:</span>window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">,</span>\n        height <span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span>innerHeight<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token operator\">&lt;</span>LineChart <span class=\"token comment\">//선으로 그려진 차트</span>\n        width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>chartWidth<span class=\"token punctuation\">}</span>\n        height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>chartHeight<span class=\"token punctuation\">}</span>\n        data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>changeChart<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n        margin<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        top<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    \n    <span class=\"token operator\">></span> \n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CartesianGrid</span></span> <span class=\"token attr-name\">strokeDasharray</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>4 4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">//눈금 점선</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">XAxis</span></span> <span class=\"token attr-name\">dataKey</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>time<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span> <span class=\"token comment\">//x좌표 표시 데이터 : time기준</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">YAxis</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">//y좌표</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Legend</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">//점마다 데이터정보 표시</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Line</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>monotone<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dot</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">dataKey</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeChart<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeChart<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">strokeWidth</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span> <span class=\"token comment\">//데이터1 선 그리기</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Line</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>monotone<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dot</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">dataKey</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeChart<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeChart<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">strokeWidth</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span> <span class=\"token comment\">//데이터2 선 그리기</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LineChart</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><em>주석을 모두 읽어주세요.</em> <br></li>\n</ul>\n<p>웹 창 사이즈가 변결될 때 그 값을 가져오는데 <strong>addEventListener(‘resize’)</strong>를 사용하였다. 이 함수는 자바스크립트에서 기본으로 제공하는 이벤트함수이다.\n<br></p>\n<p>코드설명을 하자면 먼저 <strong>컴포넌트가 초기 생성</strong>될 때 componentDidMount()함수가 실행되고 여기서 하는 일은 <strong>3가지</strong>이다. <strong>첫번째로</strong> visible값을 15초에 한번씩 반전하여 15초는 미세먼지,초미세먼지 데이터를 차트에 표시하고 15초는 이산화탄소, TVOC를 차트에 표시한다. <strong>두번째는</strong> 웹 창 사이즈가 변경 시 그 값을 가져와 state에 width,height를 변경해주는 이벤트함수를 등록한다. <strong>세번째는</strong> 웹 창 사이즈에 따라 차트 크기를 변경해주는 이벤트함수를 등록한다. <strong>updateWindowSize()</strong>는 웹 사이즈 값을 state에 담는 기능을 하는 함수이고 <strong>updateChartDimention()</strong>는 변경 된 웹 사이즈에 따라 차트 크기 state값을 바꿔주는 기능을 하는 함수이다. 마지막으로 중복으로 이벤트가 발생하지 않게 <strong>componenetWillUnMount()</strong>에서 등록된 두개의 이벤트리스너를 없앤다.</p>\n<br>\n<p><strong>Rechart 링크: <a href=\"http://recharts.org/en-US/\">http://recharts.org/en-US/</a></strong></p>\n<br>\n<ul>\n<li>차트, 사이드 컴포넌트 생성 시 <strong>animate</strong>를 적용하였다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"renux\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-renux line-numbers\"><code class=\"language-renux\">    npm install --save react-animated-css</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Animated</span></span> <span class=\"token attr-name\">animationIn</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>zoomIn<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">animationOut</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>zoomOut<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">animationInDuration</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">800</span><span class=\"token punctuation\">}</span></span> \n        <span class=\"token attr-name\">animationOutDuration</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1000</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">isVisible</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>chartVisible<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n    //애니메이션 적용할 컴포넌트를 위치함.\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Animated</span></span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>컴포넌트 생성 및 삭제시에 zoomIn, zoomOut 애니메이션을 사용하였다. 지속시간은 생성시에는 0.8초 삭제시에는 1초를 적용하였다. 최상단에 <strong>Animated</strong>태그가 위치해 있고 적용할 컴포넌트를 감싸주면 애니메이션이 적용된다.</p>\n<p><strong>참고자료링크: <a href=\"https://github.com/digital-flowers/react-animated-css\">https://github.com/digital-flowers/react-animated-css</a></strong></p>\n<br>\n<ol start=\"3\">\n<li>\n<p><strong>Dependandies</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token string\">\"dependencies\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token string\">\"body-parser\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.19.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"cross-env\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.2.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"express\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^4.17.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"immutable\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^4.0.0-rc.12\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"moment\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^2.24.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"moment-timezone\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^0.5.26\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^16.9.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-animated-css\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.2.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-animation\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.2.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^16.9.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-live-clock\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^3.1.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-moment\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^0.9.2\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-redux\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^7.1.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^5.0.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"react-scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3.1.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token string\">\"recharts\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"^1.7.1\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<br>\n<ul>\n<li>\n<h3>Github 주소</h3>\n<p><strong><a href=\"https://github.com/YooSeok2/fineDustCheck.git\">https://github.com/YooSeok2/fineDustCheck.git</a></strong></p>\n</li>\n</ul>\n<br>\n<h1>긴 글 읽어주셔서 감사합니다.</h1>","frontmatter":{"title":"실내 공기질 측정 모니터링","date":"11 septiembre 2019","image":{"id":"3f7f3590-e9a6-53e8-8405-ff75dd2373af","childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACxElEQVQ4y21UWU8TURTun/PZv+CLf0DiG4QYCEoCLiwJLhTaQpGWlrqBDz6QgIlRE4kSalnakS4D7ez7zJ2Zz3OnFEL0JF/OufdMv/udc25vStEcSIoJzfBg2yE03YOqO9BNrw/j2muGm8CwPHS7JmTZotiHYfqJV3UXKc1w4NgOQvjomE2AoiAANE2DoiiQJIkgw3FccAvDKPG7X89Q2q5SFEPXDSLlohykTGKOwbD66TWys0N4UpyG7BhwnQCO6xH8BJ7P4Ad0rM/BoNHvRNmmgwK4lOfQSX3KdSK0TQFPV+eQGb2LW3du40vtW6KChQxxHCcqGAupJXwdJSr5OiBynut/A3BxKctiMAMJB9UKPtcF7FV3IEoNRPSt5wVUPhGwCJbJoEg+LCuArDow9ABSz4NpBFdtSAhNajC3/doP7JAy2ZPo9JiI6CDKWbbfh+PBsImAvGbbVLIDUVVh2l6i8opQN13Iiobv+0f4eXACmzZdjyGKIgQhKYwY2ABxiJDg0z6HzRzKBzdL5oQmTQjoy44oyQkDGjWfvmXZ1Ds7maSqalSqkaw5XMpzz1i/1/w6pYzLkvkGVxVFMU00xL/G8+FVef8z3pqEkJMNwE3VbXTOZYgXhK6CDnm+7lwouOipSdwWpSQvNJqoE1rnCrXOuqlwQPj7SEA6V8CrTAGZtU2Mz6QxRhifXcbCcgHp5XUsvMxjMbuBkfkVPFoqYSpTxOFp85pwQMqtdnqGbLGC/OZ7lN5t4f7oQww/nsfEiwzSK2vYLhfwtlxGhXIlQUTloIrJbB77x39ulsx7yO1XTcD04jrmcmUs5N9gZHIGQxNTGJl6hqVcHsXVHCrFDXzY+oiV3T2MzT/HveEHdJdPkEoeAuPyEaC/Dn8IurIJodW7hIRmR0ajeY7GmUhxD612F23yIvXyuN7CYbWOutChC2/jL+riCC0jQr+2AAAAAElFTkSuQmCC","aspectRatio":1.427814569536424,"src":"/static/97bb256459b4bd15de2d04bb08ded56a/572fb/finedust.png","srcSet":"/static/97bb256459b4bd15de2d04bb08ded56a/0cc6a/finedust.png 256w,\n/static/97bb256459b4bd15de2d04bb08ded56a/774d6/finedust.png 512w,\n/static/97bb256459b4bd15de2d04bb08ded56a/572fb/finedust.png 1024w,\n/static/97bb256459b4bd15de2d04bb08ded56a/09d41/finedust.png 1078w","srcWebp":"/static/97bb256459b4bd15de2d04bb08ded56a/0e71e/finedust.webp","srcSetWebp":"/static/97bb256459b4bd15de2d04bb08ded56a/6306c/finedust.webp 256w,\n/static/97bb256459b4bd15de2d04bb08ded56a/b12da/finedust.webp 512w,\n/static/97bb256459b4bd15de2d04bb08ded56a/0e71e/finedust.webp 1024w,\n/static/97bb256459b4bd15de2d04bb08ded56a/cad1f/finedust.webp 1078w","sizes":"(max-width: 1024px) 100vw, 1024px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/finedust/","previous":null,"next":{"fields":{"slug":"/instagram/"},"frontmatter":{"title":"인스타그램 메인화면 By React","path":"/blog/2019/10/14/instagram"}}}}}